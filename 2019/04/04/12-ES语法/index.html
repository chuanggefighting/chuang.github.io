<!-- build time:Tue Apr 16 2019 00:43:02 GMT+0800 (中国标准时间) --><!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link rel="stylesheet" href="/lib/pace/pace-theme-center-simple.min.css?v=1.0.2"><link rel="stylesheet" href="//fonts.proxy.ustclug.org/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"><link rel="stylesheet" href="/css/main.css?v=6.7.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.ico?v=6.7.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.ico?v=6.7.0"><link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"6.7.0",sidebar:{position:"left",display:"post",offset:12,b2t:!0,scrollpercent:!0,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/2ed51855.js","daovoice"),daovoice("init",{app_id:"2ed51855"}),daovoice("update")</script><meta name="description" content="ECMAScript6 ～ 9 常用的新语法规范"><meta name="keywords" content="js,ES"><meta property="og:type" content="article"><meta property="og:title" content="ES6 ～ ES9 新特性"><meta property="og:url" content="https://chuanggefighting.github.io/2019/04/04/12-ES语法/index.html"><meta property="og:site_name" content="闯哥要去流浪了"><meta property="og:description" content="ECMAScript6 ～ 9 常用的新语法规范"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2019-04-13T19:50:24.203Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ES6 ～ ES9 新特性"><meta name="twitter:description" content="ECMAScript6 ～ 9 常用的新语法规范"><link rel="alternate" href="/atom.xml" title="闯哥要去流浪了" type="application/atom+xml"><link rel="canonical" href="https://chuanggefighting.github.io/2019/04/04/12-ES语法/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>ES6 ～ ES9 新特性 | 闯哥要去流浪了</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><a href="https://your-url" class="github-corner" aria-label="View source on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">闯哥要去流浪了</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">我知道你一定会来，所以我一直在等</p></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home //首页"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags //标签"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th //分类"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive //归档"></i><br>归档</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><div class="reading-progress-bar"></div><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://chuanggefighting.github.io/2019/04/04/12-ES语法/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="chuanggefighting"><meta itemprop="description" content="chuangge's blog."><meta itemprop="image" content="/images/chuang.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="闯哥要去流浪了"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">ES6 ～ ES9 新特性</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-04-04 00:35:46" itemprop="dateCreated datePublished" datetime="2019-04-04T00:35:46+08:00">2019-04-04</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-04-14 03:50:24" itemprop="dateModified" datetime="2019-04-14T03:50:24+08:00">2019-04-14</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Javascript/" itemprop="url" rel="index"><span itemprop="name">Javascript</span></a></span> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2019/04/04/12-ES语法/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/04/04/12-ES语法/" itemprop="commentCount"></span> </a></span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> 阅读次数： <span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span title="本文字数">14k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 ≈</span> <span title="阅读时长">13 分钟</span></div><div class="post-description">ECMAScript6 ～ 9 常用的新语法规范</div></div></header><div class="post-body" itemprop="articleBody"><meta name="generator" content="Hexo 3.8.0"><h1 id="一、ES6"><a href="#一、ES6" class="headerlink" title="一、ES6"></a>一、ES6</h1><h2 id="let-const"><a href="#let-const" class="headerlink" title="let const"></a>let const</h2><ul><li><strong>var</strong>：声明变量或常量<ul><li>存在变量提升现象：变量可以在声明之前使用，值为 undefined</li><li>没有块级作用域：ES6 之前的 js 只有全局作用域和函数作用域</li></ul></li><li><strong>let</strong>：声明变量<ul><li>存在暂时性死区：变量在声明之前使用会报错</li><li>存在块级作用域：声明的变量只能在其所在的代码块内才能访问</li></ul></li><li><strong>const</strong>：声明常量<ul><li>存在暂时性死区和块级作用域</li><li>常量名建议写成纯大写字母表示</li><li>不允许重新赋值，只能在声明时立即初始化</li></ul></li></ul><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5 </span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'lux'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'hello'</span> + name)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6：${}</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">'lux'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`hello <span class="subst">${name}</span>`</span>)  <span class="comment">// hello lux</span></span><br></pre></td></tr></tbody></table></figure><h3 id="多行字符串"><a href="#多行字符串" class="headerlink" title="多行字符串"></a>多行字符串</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5：反斜杠</span></span><br><span class="line"><span class="keyword">var</span> msg = <span class="string">"Hi \</span></span><br><span class="line"><span class="string">man</span></span><br><span class="line"><span class="string">"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6：反引号</span></span><br><span class="line"><span class="keyword">const</span> template = <span class="string">`welcome</span></span><br><span class="line"><span class="string">    to</span></span><br><span class="line"><span class="string">world`</span></span><br></pre></td></tr></tbody></table></figure><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// includes：判断是否包含</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">'hahay'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">'y'</span>)) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// repeat: 获取字符串重复n次</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">'he'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">3</span>)) <span class="comment">// 'hehehe'</span></span><br><span class="line"><span class="comment">// 如果带有小数，先进行 Math.floor(num) 处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// startsWith、endsWith：判断是否以给定文本 开始、结束</span></span><br><span class="line"><span class="keyword">const</span> str =  <span class="string">'hello world!'</span></span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">'hello'</span>))  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">'!'</span>))        <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// padStart、padEnd：若字符串不够指定长度则在 头部、尾部 补全</span></span><br><span class="line">setInterval(<span class="function"><span class="params">()</span> =></span> {</span><br><span class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    <span class="keyword">const</span> hours = now.getHours().toString()</span><br><span class="line">    <span class="keyword">const</span> minutes = now.getMinutes().toString()</span><br><span class="line">    <span class="keyword">const</span> seconds = now.getSeconds().toString()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">${hours.padStart(<span class="number">2</span>, <span class="number">0</span>)}</span>:<span class="subst">${minutes.padStart(<span class="number">2</span>, <span class="number">0</span>)}</span>:<span class="subst">${seconds.padStart(<span class="number">2</span>, <span class="number">0</span>)}</span>`</span>)</span><br><span class="line">}, <span class="number">1000</span>)</span><br></pre></td></tr></tbody></table></figure><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><ul><li>省略 return 关键字</li><li>不需要 function 关键字</li><li>始终指向当前上下文的 this 对象</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只有一个参数时不需要 ()</span></span><br><span class="line"><span class="keyword">let</span> f = <span class="function"><span class="params">n</span> =></span> n  </span><br><span class="line"><span class="keyword">let</span> f = <span class="function"><span class="params">()</span> =></span> <span class="number">5</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 只有一条返回语句时不需要 {}</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].map(<span class="function"><span class="params">x</span> =></span> x + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回对象则需要括号包裹</span></span><br><span class="line"><span class="keyword">let</span> obj = <span class="function"><span class="params">name</span> =></span> ({<span class="string">"name"</span>:name})</span><br></pre></td></tr></tbody></table></figure><h3 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h3><ul><li>默认参数：定义函数时指定</li><li>Rest 参数：获取函数的不定参数</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x=<span class="number">1</span>, y=<span class="number">1</span></span>)</span>{  </span><br><span class="line">  <span class="keyword">return</span> x + y;  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rest 参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, ...params</span>)</span>{ </span><br><span class="line">  <span class="built_in">console</span>.log(params) </span><br><span class="line">} </span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>)      <span class="comment">// [2]</span></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)   <span class="comment">// [2, 3]</span></span><br></pre></td></tr></tbody></table></figure><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 属性简写：属性名相同</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">people</span>(<span class="params">name, age</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">        name, age     </span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'bar'</span>;</span><br><span class="line"><span class="keyword">var</span> user = { name }; <span class="comment">// { name: "bar" }</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法简写</span></span><br><span class="line"><span class="keyword">const</span> people = {</span><br><span class="line">  name: <span class="string">'lux'</span>,</span><br><span class="line">  getName () {</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 浅拷贝方法</span></span><br><span class="line"><span class="keyword">const</span> target = {}   </span><br><span class="line"><span class="built_in">Object</span>.assign(target, { <span class="attr">name</span>: <span class="string">'Lisa'</span> }, { <span class="attr">age</span>: <span class="number">18</span> })</span><br></pre></td></tr></tbody></table></figure><h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><blockquote><p>自动提取数组或对象中的值并赋值给变量，要求前后结构相同或包含</p></blockquote><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 对象：变量须与属性同名但不分顺序</span></span><br><span class="line">  <span class="keyword">let</span> { name, age } = { <span class="attr">name</span>: <span class="string">'lux'</span>, <span class="attr">age</span>: <span class="number">20</span> }</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">${name}</span>: <span class="subst">${age}</span>`</span>)  <span class="comment">// lux : 20</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> {foo} = {<span class="attr">bar</span>: <span class="string">'baz'</span>}</span><br><span class="line">  <span class="built_in">console</span>.log(foo)           <span class="comment">// undefined</span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="comment">// 数组：变量值由其位置决定</span></span><br><span class="line">  <span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">  <span class="built_in">console</span>.log(x, y)     <span class="comment">// 1, 2</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> [a, ...b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 不完全解构</span></span><br><span class="line">  <span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 默认值</span></span><br><span class="line">  [x, y = <span class="string">'b'</span>] = [<span class="string">'a'</span>]    <span class="comment">// x='a', y='b'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 代码重构：最后一行即可</span></span><br><span class="line">  <span class="keyword">var</span> body = request.body</span><br><span class="line">  <span class="keyword">var</span> username = body.username</span><br><span class="line">  <span class="keyword">var</span> password = body.password</span><br><span class="line">  <span class="keyword">const</span> { body, <span class="attr">body</span>: { username, password } } = request </span><br><span class="line">  <span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## Spread 扩展运算符 </span></span><br><span class="line"><span class="string">> Rest 参数的逆运算，用于将数组或对象展开成一系列用逗号隔开的值</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  * 合并对象或数组：参数位置不限制</span></span><br><span class="line"><span class="string">  * 配合解构赋值：必须将参数放到最后，否则报错</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="keyword">const</span> color = [<span class="string">'red'</span>, <span class="string">'yellow'</span>]</span><br><span class="line"><span class="keyword">const</span> colorful = [...color, <span class="string">'green'</span>, <span class="string">'pink'</span>]  </span><br><span class="line"><span class="keyword">const</span> [first, ...colorful] = color  <span class="comment">// ['yellow']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象</span></span><br><span class="line"><span class="keyword">const</span> user = { <span class="attr">name</span>: <span class="string">'lux'</span>, <span class="attr">age</span>: <span class="number">20</span> }</span><br><span class="line"><span class="keyword">const</span> userinfo = { ...user, <span class="attr">address</span>: <span class="string">'shanghai'</span> }</span><br><span class="line"><span class="keyword">const</span> { name, ...userinfo } = user   <span class="comment">// {age: 20}</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Symbol-类型"><a href="#Symbol-类型" class="headerlink" title="Symbol 类型"></a>Symbol 类型</h2><blockquote><p>一种新的原始数据类型，Symbol 值类似于字符串但每一个都表示独一无二的值</p></blockquote><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="built_in">Symbol</span>();          </span><br><span class="line"><span class="keyword">var</span> s2 = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">var</span> s3 = <span class="built_in">Symbol</span>(<span class="string">"foo"</span>);      <span class="comment">// 传入字符串表示描述信息</span></span><br><span class="line"><span class="keyword">var</span> s4 = <span class="built_in">Symbol</span>.for(<span class="string">"foo"</span>);  <span class="comment">// 有则返回，无则创建</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 任何两个 Symbol 值都不相等</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s1, s1 == s2)   <span class="comment">// symbol false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>.keyFor(s3))     <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>.keyFor(s4))     <span class="comment">// foo</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不能与其他类型的值进行运算，否则会报错</span></span><br><span class="line"><span class="comment">// var k = s1 + 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以转为字符串、布尔值</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="built_in">String</span>(s1)</span><br><span class="line"><span class="keyword">var</span> bl = <span class="built_in">Boolean</span>(s1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为对象属性名：不能使用点操作</span></span><br><span class="line"><span class="keyword">var</span> obj = { [s1]: <span class="string">'hello'</span> };</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = {}</span><br><span class="line">obj[s1] = <span class="string">'hello'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = {};</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, s1, { <span class="attr">value</span>: <span class="string">'hello'</span> });</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 属性名的遍历</span></span><br><span class="line"><span class="keyword">var</span> sKey = <span class="built_in">Object</span>.getOwnPropertySymbols(obj)  <span class="comment">// 返回Symbol键名</span></span><br><span class="line"><span class="keyword">var</span> aKey = <span class="built_in">Reflect</span>.ownKeys(obj)               <span class="comment">// 返回所有键名</span></span><br></pre></td></tr></tbody></table></figure><h2 id="for-of-遍历"><a href="#for-of-遍历" class="headerlink" title="for-of 遍历"></a>for-of 遍历</h2><ul><li>方式对比<ul><li>forEach：无法跳出循环，即 break、return 命令都不奏效</li><li>for-in：主要是为遍历对象而设计的，不适用于遍历数组</li><li>for-of：调用遍历器接口，使用范围较广</li></ul></li><li><p>使用技巧</p><ul><li>类似数组的对象：通过 Array.from 方法转为数组</li><li>普通对象<ul><li>通过 Object.keys 方法将键名生成数组</li><li>通过 Generator 函数将对象重新包装</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrLike = { <span class="attr">length</span>: <span class="number">2</span>, <span class="number">0</span>: <span class="string">'a'</span>, <span class="number">1</span>: <span class="string">'b'</span> };</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> <span class="built_in">Array</span>.from(arrLike)) {</span><br><span class="line">    <span class="built_in">console</span>.log(x)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = { <span class="attr">name</span>: <span class="string">'Jane'</span>, <span class="attr">age</span>: <span class="number">20</span> };</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) {</span><br><span class="line">  <span class="built_in">console</span>.log(obj[key]);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h2 id="Iterator-遍历器"><a href="#Iterator-遍历器" class="headerlink" title="Iterator 遍历器"></a>Iterator 遍历器</h2><blockquote><p>本质是一种有 next() 方法的指针对象，第几次调用就指向第几个成员</p></blockquote><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><ul><li>为各种数据结构提供一个统一的、简便的访问接口（统一）</li><li>使得数据结构的成员能够按某种次序排列（按序）</li><li>配合 for-of 实现遍历</li></ul><h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><blockquote><p>本质是一个生成遍历器的函数，不同于 forEach 等遍历方法</p></blockquote><div style="text-indent:2em">默认部署在数据结构的 Symbol.iterator 属性，它是当前数据结构默认的遍历器生成函数，执行这个函数就会返回一个遍历器。原生具备 Iterator 接口的数据结构如下：Array、TypedArray、Map、Set、String，只有这些数据结构不需要自定义遍历器生成函数并部署，循环遍历时可以直接通过 for-of 循环或 while 判断对象的 done 属性。</div><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原生接口</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line"><span class="keyword">let</span> iter = arr[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"><span class="built_in">console</span>.log(iter.next())  <span class="comment">// {value: "a", done: false}</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义接口</span></span><br><span class="line"><span class="keyword">const</span> obj = {</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator]: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">const</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 对象属性组成的数组</span></span><br><span class="line">    <span class="keyword">const</span> ks = <span class="built_in">Object</span>.keys(that);</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      next: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        <span class="keyword">return</span> {</span><br><span class="line">          value: that[ks[index++]],</span><br><span class="line">          done: (index > ks.length)</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> v <span class="keyword">of</span> obj) {</span><br><span class="line">  <span class="built_in">console</span>.log(v);      <span class="comment">// 1</span></span><br><span class="line">  <span class="keyword">break</span>;      <span class="comment">// 触发 return </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><blockquote><p>任何接受数组作为参数的场景都默认调用了遍历器接口，比如 Array.from、Object.keys、Promise.all、Map() 等</p></blockquote><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构赋值</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">set</span> = new Set().add('a').add('b');</span><br><span class="line">let [first, ...rest] = <span class="keyword">set</span>;</span><br><span class="line"></span><br><span class="line">// 扩展运算符</span><br><span class="line">var str = 'hello';</span><br><span class="line">[...str] //  ['h','e','l','l','o']</span><br><span class="line"></span><br><span class="line">// yield*</span><br><span class="line">let generator = function* () {</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span>* [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">5</span>;</span><br><span class="line">};</span><br><span class="line"><span class="keyword">var</span> iterator = generator();</span><br><span class="line">iterator.next()</span><br></pre></td></tr></tbody></table></figure><h2 id="Promise-对象"><a href="#Promise-对象" class="headerlink" title="Promise 对象"></a>Promise 对象</h2><blockquote><p>处理异步操作的对象，可以通过链式调用的方式来组织代码，让代码更加直观</p></blockquote><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建promise</span></span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>{</span><br><span class="line">    <span class="comment">// 进行一些异步或耗时操作</span></span><br><span class="line">    <span class="keyword">if</span> ( <span class="comment">/*如果成功 */</span> ) {</span><br><span class="line">        resolve(<span class="string">"Stuff worked!"</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        reject(<span class="built_in">Error</span>(<span class="string">"It broke"</span>))</span><br><span class="line">    }</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">//绑定处理程序</span></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(result)   <span class="comment">//promise成功执行</span></span><br><span class="line">}, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(err)    <span class="comment">//promise失败执行</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure><h2 id="Generators-函数"><a href="#Generators-函数" class="headerlink" title="Generators 函数"></a>Generators 函数</h2><h3 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h3><ul><li><strong>定义</strong><ul><li>function 关键字和函数名之间有一个星号</li><li>内部使用 yield 语句，定义不同的内部状态</li><li>作为对象属性时可以简写</li></ul></li><li><strong>调用</strong><ul><li>调用函数会返回一个生成的遍历器对象，并没有执行函数体并返回结果</li><li>调用 next 方法分段执行，从上次暂停地方开始直到 yield/return 语句，返回对象的<br>value 值会被赋值为 yield/return 右边的结果</li></ul></li><li><strong>原理</strong><ul><li>通过 yield 语句实现传出返回对象</li><li>通过 next(value) 方法传入参数，参数值将作为上一个 yield 语句的返回值</li></ul></li><li><strong>yield 语句</strong><ul><li>只能用于 Generator 函数内部</li><li>如果用于其它表达式中，则必须放到圆括号里面</li><li>用作函数参数或放在赋值表达式的右边时，可以不加括号</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">foo</span>(<span class="params"></span>)</span>{</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">200</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">300</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">let</span> f = foo();				</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(f.next());  <span class="comment">// { value: 100, done: false }	</span></span><br><span class="line"><span class="built_in">console</span>.log(f.next());	<span class="comment">// { value: 200, done: false }</span></span><br><span class="line"><span class="built_in">console</span>.log(f.next());	<span class="comment">// { value: 300, done: true }</span></span><br><span class="line"><span class="built_in">console</span>.log(f.next());	<span class="comment">// { value: undefined, done: true }</span></span><br></pre></td></tr></tbody></table></figure><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ul><li>异步编程：将异步操作写到 yield 语句，等到调用 next 方法时再继续执行</li><li>控制流管理：执行多步的耗时操作时，通过回调函数或 Promise 方式都不简洁</li><li>部署 Iterator 接口：利用 Generator 函数，可以在任意对象上部署 Iterator 接口</li><li><p>作为数据结构：可以返回一系列的值，所以它可以对任意表达式提供类似数组的接口</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步操作的同步化表达</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">loadUI</span>(<span class="params"></span>) </span>{</span><br><span class="line">  showLoading();</span><br><span class="line">  <span class="keyword">yield</span> loadUIDataAsynchronously();</span><br><span class="line">  hideLoading();</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> loader = loadUI();</span><br><span class="line">loader.next()  <span class="comment">// 加载</span></span><br><span class="line">loader.next()  <span class="comment">// 隐藏</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制流管理</span></span><br><span class="line">step1(<span class="function"><span class="keyword">function</span> (<span class="params">value1</span>) </span>{</span><br><span class="line">  step2(value1, <span class="function"><span class="keyword">function</span>(<span class="params">value2</span>) </span>{</span><br><span class="line">    step3(value2, <span class="function"><span class="keyword">function</span>(<span class="params">value3</span>) </span>{</span><br><span class="line">      <span class="comment">// Do something with value3</span></span><br><span class="line">    })</span><br><span class="line">  })</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve(step1)</span><br><span class="line">  .then(step2)</span><br><span class="line">  .then(step3)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">value3</span>) </span>{</span><br><span class="line">      <span class="comment">// Do something with value3</span></span><br><span class="line">  }, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>{})</span><br><span class="line">  .done();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">longRunningTask</span>(<span class="params">value1</span>) </span>{</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">var</span> value2 = <span class="keyword">yield</span> step1(value1);</span><br><span class="line">    <span class="keyword">var</span> value3 = <span class="keyword">yield</span> step2(value2);</span><br><span class="line">    <span class="keyword">var</span> value4 = <span class="keyword">yield</span> step3(value3);</span><br><span class="line">    <span class="keyword">var</span> value5 = <span class="keyword">yield</span> step4(value4);</span><br><span class="line">    <span class="comment">// Do something with value4</span></span><br><span class="line"></span><br><span class="line">  } <span class="keyword">catch</span> (e) {</span><br><span class="line">    </span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 部署 Iterator 接口</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">iterEntries</span>(<span class="params">obj</span>) </span>{</span><br><span class="line">  <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(obj);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i < keys.length; i++) {</span><br><span class="line">    <span class="keyword">let</span> key = keys[i];</span><br><span class="line">    <span class="keyword">yield</span> [key, obj[key]];</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myObj = { <span class="attr">foo</span>: <span class="number">3</span>, <span class="attr">bar</span>: <span class="number">7</span> };</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> iterEntries(myObj)) {</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为数据结构</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doStuff</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    fs.readFile.bind(<span class="literal">null</span>, <span class="string">'hello.txt'</span>),</span><br><span class="line">    fs.readFile.bind(<span class="literal">null</span>, <span class="string">'world.txt'</span>),</span><br><span class="line">    fs.readFile.bind(<span class="literal">null</span>, <span class="string">'and-such.txt'</span>)</span><br><span class="line">  ]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">doStuff</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">yield</span> fs.readFile.bind(<span class="literal">null</span>, <span class="string">'hello.txt'</span>);</span><br><span class="line">  <span class="keyword">yield</span> fs.readFile.bind(<span class="literal">null</span>, <span class="string">'world.txt'</span>);</span><br><span class="line">  <span class="keyword">yield</span> fs.readFile.bind(<span class="literal">null</span>, <span class="string">'and-such.txt'</span>);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span> (task <span class="keyword">of</span> doStuff()) {</span><br><span class="line">    <span class="comment">// task是一个函数，可以像回调函数那样使用</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h2 id="Moudle-模块化"><a href="#Moudle-模块化" class="headerlink" title="Moudle 模块化"></a>Moudle 模块化</h2><div style="text-indent:2em">ES5 不支持原生的模块化，ES6 的 内置模块功能借鉴了 CommonJS、AMD 各自的优点，根据功能将代码封装到不同模块中。每一个模块都有独立的作用域和命名空间，可以防止命名冲突。当前模块通过 export (default) 定义对外暴露的接口，其它模块通过 import 加载对应模块。</div><ul><li>export：对外输出当前模块中的多个变量或函数的接口<ul><li>通过 export 方式导出时需要加 {}，export default 则不需要</li><li>在一个模块中可以有多个 export，但最多只能有一个 export default</li></ul></li><li>import：一个模块中加载另一个含有 export 接口的模块</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js </span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'freddy'</span></span><br><span class="line"><span class="keyword">let</span> sayName = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">// export 在一个模块中可以多次使用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> age = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">export</span> { name, sayName }</span><br><span class="line"><span class="keyword">export</span> { name <span class="keyword">as</span> userName, sayName <span class="keyword">as</span> say }  <span class="comment">// 改变输出的变量名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// export default：在一个模块中只能输出一次</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> name;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> sayName;  </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> { name, sayName }  <span class="comment">// 输出一个对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入部分</span></span><br><span class="line"><span class="comment">// export 输出的变量名不可改变</span></span><br><span class="line"><span class="keyword">import</span> { name, sayName } <span class="keyword">from</span> <span class="string">"./lib"</span>;  </span><br><span class="line"><span class="keyword">import</span> { name <span class="keyword">as</span> userName } <span class="keyword">from</span> <span class="string">"./lib"</span>;  </span><br><span class="line"><span class="keyword">import</span> { userName, say } <span class="keyword">from</span> <span class="string">"./lib"</span>;  <span class="comment">// 接收新变量名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// export default 输出的变量名可以重新自定义</span></span><br><span class="line"><span class="keyword">import</span> userName <span class="keyword">from</span> <span class="string">"./lib"</span>;</span><br><span class="line"><span class="keyword">import</span> userObj <span class="keyword">from</span> <span class="string">"./lib"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将整个模块当作单一对象导入</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> userinfo <span class="keyword">from</span> <span class="string">"./lib"</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="class-类的支持"><a href="#class-类的支持" class="headerlink" title="class 类的支持"></a>class 类的支持</h2><blockquote><p>关键字有 constructor、extends、super</p></blockquote><h3 id="定义类"><a href="#定义类" class="headerlink" title="定义类"></a>定义类</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES5 </span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="comment">// 定义类、构造函数</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name, age</span>)</span>{</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义原型方法</span></span><br><span class="line">    User.prototype.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'prototype'</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义静态方法</span></span><br><span class="line">    User.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'static'</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 暴露接口</span></span><br><span class="line">    <span class="built_in">window</span>.User = user;</span><br><span class="line">})();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6：构造函数、静态方法、原型方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>{</span><br><span class="line">    <span class="comment">// 构造函数：实例化时默认执行</span></span><br><span class="line">    <span class="keyword">constructor</span>(name, age){</span><br><span class="line">        <span class="comment">// 初始化对象</span></span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 原型方法</span></span><br><span class="line">    show(){</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'prototype'</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">static</span> run(){</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'static'</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="继承类"><a href="#继承类" class="headerlink" title="继承类"></a>继承类</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name, age</span>)</span>{  </span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age; </span><br><span class="line">}</span><br><span class="line">Father.prototype.show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{ }</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name, age, address</span>)</span>{</span><br><span class="line">    <span class="comment">// 继承第一句：让子类实例化的对象具备父类的所有属性</span></span><br><span class="line">    <span class="comment">// Father.apply(this,arguments);</span></span><br><span class="line">    Father.call(<span class="keyword">this</span>, name, age);</span><br><span class="line">    <span class="keyword">this</span>.address = address;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 继承第二句：让子类实例化对象具备父类的所有原型方法</span></span><br><span class="line">Son.prototype = <span class="built_in">Object</span>.create(Father.prototype);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承第三句：找回丢失的构造函数</span></span><br><span class="line">Son.prototype.constructor = Son;</span><br><span class="line"></span><br><span class="line">Son.prototype.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{ }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>{</span><br><span class="line">    <span class="keyword">constructor</span>(name, age, address){</span><br><span class="line">        <span class="comment">// super 指代整个 prototype/proto 指向的对象</span></span><br><span class="line">        <span class="keyword">super</span>(name, age);</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="getters-amp-setters"><a href="#getters-amp-setters" class="headerlink" title="getters & setters"></a>getters & setters</h3><blockquote><p>对某个属性设置存值函数和取值函数，拦截该属性的存取行为</p></blockquote><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只有 getter 没有 setter 时无法进行赋值操作</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>{</span><br><span class="line">    <span class="keyword">constructor</span>(name) { <span class="comment">//构造函数</span></span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">get</span> name() {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._name.toUpperCase();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">set</span> name(name) {</span><br><span class="line">        <span class="comment">// 对 this.name 赋则会调用 set name 导致无限递归</span></span><br><span class="line">        <span class="keyword">this</span>._name = name;</span><br><span class="line">    }</span><br><span class="line">    sayName() {</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> People(<span class="string">"tom"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p.name);    <span class="comment">// TOM</span></span><br><span class="line"><span class="built_in">console</span>.log(p._name);   <span class="comment">// tom</span></span><br><span class="line">p.sayName();            <span class="comment">// TOM</span></span><br></pre></td></tr></tbody></table></figure><h1 id="二、ES7"><a href="#二、ES7" class="headerlink" title="二、ES7"></a>二、ES7</h1><h2 id="arr-includes"><a href="#arr-includes" class="headerlink" title="arr.includes"></a>arr.includes</h2><blockquote><p>判断数组是否包含一个指定值</p></blockquote><ul><li>参数<ul><li>要搜索的值</li><li>搜索的开始索引</li></ul></li><li>区别<ul><li>返回布尔值，indexOf 返回数值</li><li>可用来判断数组是否包含 NaN，而 indexOf 不行</li><li>对于数组中的空值，includes 返回 undefined，而 indexOf 不会</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, , <span class="number">3</span>, <span class="literal">NaN</span>]</span><br><span class="line">arr.includes(<span class="number">1</span>)          <span class="comment">// true</span></span><br><span class="line">arr.includes(<span class="number">1</span>, <span class="number">1</span>)       <span class="comment">// false</span></span><br><span class="line">arr.includes(<span class="literal">NaN</span>)        <span class="comment">// true</span></span><br><span class="line">arr.includes(<span class="literal">undefined</span>)  <span class="comment">// true</span></span><br></pre></td></tr></tbody></table></figure><h2 id="求幂运算符"><a href="#求幂运算符" class="headerlink" title="求幂运算符"></a>求幂运算符</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 运算符 **  </span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">2</span></span><br><span class="line">a **= <span class="number">3</span></span><br><span class="line">a == <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">3</span>) == <span class="number">2</span> ** <span class="number">3</span>   <span class="comment">// 8</span></span><br></pre></td></tr></tbody></table></figure><h1 id="三、ES8"><a href="#三、ES8" class="headerlink" title="三、ES8"></a>三、ES8</h1><h2 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h2><blockquote><p>async 可看作多个异步操作包装成的一个 Promise 对象，await 是 then() 的语法糖</p></blockquote><h3 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h3><blockquote><p>async 函数是对 Generator 函数的改进，使用时将它的 星号、yield 分别替换为 async、await 即可，优点如下：</p></blockquote><ul><li>内置执行器：Generator 函数的执行必须依靠 co 模块的执行器，而 async 函数自带</li><li>更好的语义：async、await 分别表示函数里有异步操作、需要等待后面表达式<br>的执行结果，语义比较清楚</li><li>更广的适用性：co 模块约定 yield 命令后面只能是 Thunk 函数或 Promise 对象，<br>而 await 命令后面可以是 Promise 对象和原始类型的值（数值、字符串和布尔值，但这时等同于同步操作）。</li><li>返回 Promise 对象：可以用 then 方法指定下一步的操作</li></ul><h3 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">login(userName) {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =></span> {</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =></span> {</span><br><span class="line">            resolve(<span class="string">'1001'</span>);</span><br><span class="line">        }, <span class="number">600</span>);</span><br><span class="line">    });</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">getData(userId) {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =></span> {</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =></span> {</span><br><span class="line">            <span class="keyword">if</span> (userId === <span class="string">'1001'</span>) {</span><br><span class="line">                resolve(<span class="string">'Success'</span>);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                reject(<span class="string">'Fail'</span>);</span><br><span class="line">            }</span><br><span class="line">        }, <span class="number">600</span>);</span><br><span class="line">    });</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不使用 async/await</span></span><br><span class="line">doLogin(userName) {</span><br><span class="line">    <span class="keyword">this</span>.login(userName)</span><br><span class="line">        .then(<span class="keyword">this</span>.getData)</span><br><span class="line">        .then(<span class="function"><span class="params">result</span> =></span> {</span><br><span class="line">            <span class="built_in">console</span>.log(result)</span><br><span class="line">        })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 async/await</span></span><br><span class="line"><span class="keyword">async</span> doLogin2(userName) {</span><br><span class="line">    <span class="keyword">const</span> userId=<span class="keyword">await</span> <span class="keyword">this</span>.login(userName);</span><br><span class="line">    <span class="keyword">const</span> result=<span class="keyword">await</span> <span class="keyword">this</span>.getData(userId);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.doLogin()   <span class="comment">// Success</span></span><br><span class="line"><span class="keyword">this</span>.doLogin2()  <span class="comment">// Succes</span></span><br></pre></td></tr></tbody></table></figure><h2 id="SharedArrayBuffer-Atomics"><a href="#SharedArrayBuffer-Atomics" class="headerlink" title="SharedArrayBuffer-Atomics"></a>SharedArrayBuffer-Atomics</h2><blockquote><p>用于从共享内存位置读取和写入</p></blockquote><ul><li>并行：同时执行多个任务<ul><li>JavaScript 在单线程中执行任务<ul><li>同步任务直接在单线程中排队执行</li><li>异步任务通过回调函数将结果重新放入到单线程等待执行调用</li></ul></li><li>Web Worker 引入了多线程并行处理任务<ul><li>主线程用来与用户互动</li><li>Worker 线程用来承担计算任务</li><li>每个线程的数据都是隔离的，通过 postMessage() 通信</li></ul></li><li>WebGL 用于 GPU 计算来并行处理数据</li></ul></li><li>并发：在重叠的时间段内执行几个任务<ul><li>SharedArrayBuffer：允许 Worker 线程与主线程共享同一块内存</li><li>Atomics: 用于处理 worker 共同操作同一内存地址时引起的冲突等问题</li></ul></li></ul><h2 id="Object-values-entries"><a href="#Object-values-entries" class="headerlink" title="Object.values/entries"></a>Object.values/entries</h2><ul><li>Object.values：返回自身属性值的数组</li><li>Object.entries：返回自身属性的键值对的数组</li><li>Object.getOwnPropertyDescriptors：返回自身属性的描述对象</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = { </span><br><span class="line">  name: <span class="string">"Jine"</span>,</span><br><span class="line">  <span class="keyword">get</span> age() { <span class="keyword">return</span> <span class="string">'18'</span> }</span><br><span class="line">}</span><br><span class="line"><span class="built_in">Object</span>.values(obj)   <span class="comment">// ["Jine", "18"]</span></span><br><span class="line"><span class="built_in">Object</span>.entries(obj)  <span class="comment">// [["name", "Jine"], ["age", "18"]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">"name"</span>)  <span class="comment">// 单个属性</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptors(obj)         <span class="comment">// 所有属性</span></span><br></pre></td></tr></tbody></table></figure><h2 id="String-padStart-padEnd"><a href="#String-padStart-padEnd" class="headerlink" title="String.padStart/padEnd"></a>String.padStart/padEnd</h2><blockquote><p>用于填补字符串的首部或尾部来达到给定长度，参数为 目标长度和可选的填充字符</p></blockquote><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"a"</span>.padStart(<span class="number">2</span>)         <span class="comment">//  a </span></span><br><span class="line"><span class="string">"a"</span>.padStart(<span class="number">2</span>, <span class="string">"bc"</span>)   <span class="comment">// ba</span></span><br><span class="line"><span class="string">"a"</span>.padEnd(<span class="number">3</span>, <span class="string">"b"</span>)      <span class="comment">// abb</span></span><br></pre></td></tr></tbody></table></figure><h1 id="四、ES9"><a href="#四、ES9" class="headerlink" title="四、ES9"></a>四、ES9</h1><blockquote><p>正则命名捕获组、反向断言、Unicode 转义等略过</p></blockquote><h2 id="异步迭代"><a href="#异步迭代" class="headerlink" title="异步迭代"></a>异步迭代</h2><blockquote><p>允许 async/await 和 for-of 一起使用，以串行的方式执行异步操作</p></blockquote><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6 同步迭代器</span></span><br><span class="line"><span class="keyword">const</span> items = [<span class="string">'a'</span>, <span class="string">'b'</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> item <span class="keyword">of</span> items) {</span><br><span class="line">    <span class="built_in">console</span>.log(item);  <span class="comment">// a b   </span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步迭代器：返回一个 Promise</span></span><br><span class="line"><span class="keyword">const</span> promises = [</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =></span> resolve(<span class="number">1</span>)),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =></span> resolve(<span class="number">2</span>)),</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =></span> resolve(<span class="number">3</span>)),</span><br><span class="line">]</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">let</span> p <span class="keyword">of</span> promises) {</span><br><span class="line">        <span class="built_in">console</span>.log(p);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">test(); <span class="comment">//1 ,2 3</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Promise-finally"><a href="#Promise-finally" class="headerlink" title="Promise.finally"></a>Promise.finally</h2><blockquote><p>指定最终一定会执行的逻辑处理</p></blockquote><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(<span class="number">42</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">result</span> =></span>{ })</span><br><span class="line">  .catch(<span class="function"><span class="params">error</span> =></span> { })</span><br><span class="line">  .finally(<span class="function"><span class="params">()</span> =></span> { })</span><br></pre></td></tr></tbody></table></figure></div><div><div><div style="text-align:center;color:#ccc;font-size:14px;margin-top:20px">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div></div></div><footer class="post-footer"><div><ul class="post-copyright"><li class="post-copyright-link"><strong>本文作者：</strong> <a href="/" title="欢迎访问 chuanggefighting 的个人博客">chuanggefighting</a></li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://chuanggefighting.github.io/2019/04/04/12-ES语法/" title="ES6 ～ ES9 新特性">https://chuanggefighting.github.io/2019/04/04/12-ES语法/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li></ul></div><div class="post-tags"><a href="/tags/Javascript/" rel="tag"><i class="fa fa-tag"></i> Javascript</a> <a href="/tags/ES/" rel="tag"><i class="fa fa-tag"></i> ES</a></div><div class="post-widgets"><div class="social_share"><div id="needsharebutton-postbottom"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/04/02/11-web编程/" rel="next" title="Web 编程模式和算法"><i class="fa fa-chevron-left"></i> Web 编程模式和算法</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019/04/12/13-vue项目/" rel="prev" title="Vue 基础及其项目构建">Vue 基础及其项目构建 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/chuang.png" alt="chuanggefighting"><p class="site-author-name" itemprop="name">chuanggefighting</p><p class="site-description motion-element" itemprop="description">chuangge's blog.</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">18</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">11</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/chuanggefighting" title="GitHub → https://github.com/chuanggefighting" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://stackoverflow.com/" title="StackOverflow → https://stackoverflow.com/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 推荐阅读</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.docschina.org/" title="https://www.docschina.org/" rel="external nofollow noopener noreferrer" target="_blank">印记中文</a></li><li class="links-of-blogroll-item"><a href="http://tool.lu/" title="http://tool.lu/" rel="external nofollow noopener noreferrer" target="_blank">在线工具</a></li><li class="links-of-blogroll-item"><a href="https://github.com/" title="https://github.com/" rel="external nofollow noopener noreferrer" target="_blank">Github</a></li><li class="links-of-blogroll-item"><a href="https://stackoverflow.com/" title="https://stackoverflow.com/" rel="external nofollow noopener noreferrer" target="_blank">Stack Overflow</a></li><li class="links-of-blogroll-item"><a href="https://learn-anything.xyz/" title="https://learn-anything.xyz/" rel="external nofollow noopener noreferrer" target="_blank">Learn Anything</a></li></ul></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、ES6"><span class="nav-number">1.</span> <span class="nav-text">一、ES6</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#let-const"><span class="nav-number">1.1.</span> <span class="nav-text">let const</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串"><span class="nav-number">1.2.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串拼接"><span class="nav-number">1.2.1.</span> <span class="nav-text">字符串拼接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多行字符串"><span class="nav-number">1.2.2.</span> <span class="nav-text">多行字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#API"><span class="nav-number">1.2.3.</span> <span class="nav-text">API</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">1.3.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#箭头函数"><span class="nav-number">1.3.1.</span> <span class="nav-text">箭头函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数参数"><span class="nav-number">1.3.2.</span> <span class="nav-text">函数参数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象"><span class="nav-number">1.4.</span> <span class="nav-text">对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解构赋值"><span class="nav-number">1.5.</span> <span class="nav-text">解构赋值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Symbol-类型"><span class="nav-number">1.6.</span> <span class="nav-text">Symbol 类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for-of-遍历"><span class="nav-number">1.7.</span> <span class="nav-text">for-of 遍历</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Iterator-遍历器"><span class="nav-number">1.8.</span> <span class="nav-text">Iterator 遍历器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#功能"><span class="nav-number">1.8.1.</span> <span class="nav-text">功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#接口"><span class="nav-number">1.8.2.</span> <span class="nav-text">接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用场景"><span class="nav-number">1.8.3.</span> <span class="nav-text">使用场景</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Promise-对象"><span class="nav-number">1.9.</span> <span class="nav-text">Promise 对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Generators-函数"><span class="nav-number">1.10.</span> <span class="nav-text">Generators 函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基础语法"><span class="nav-number">1.10.1.</span> <span class="nav-text">基础语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#应用场景"><span class="nav-number">1.10.2.</span> <span class="nav-text">应用场景</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Moudle-模块化"><span class="nav-number">1.11.</span> <span class="nav-text">Moudle 模块化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#class-类的支持"><span class="nav-number">1.12.</span> <span class="nav-text">class 类的支持</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定义类"><span class="nav-number">1.12.1.</span> <span class="nav-text">定义类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#继承类"><span class="nav-number">1.12.2.</span> <span class="nav-text">继承类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getters-amp-setters"><span class="nav-number">1.12.3.</span> <span class="nav-text">getters & setters</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、ES7"><span class="nav-number">2.</span> <span class="nav-text">二、ES7</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#arr-includes"><span class="nav-number">2.1.</span> <span class="nav-text">arr.includes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#求幂运算符"><span class="nav-number">2.2.</span> <span class="nav-text">求幂运算符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、ES8"><span class="nav-number">3.</span> <span class="nav-text">三、ES8</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#async-await"><span class="nav-number">3.1.</span> <span class="nav-text">async/await</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#本质"><span class="nav-number">3.1.1.</span> <span class="nav-text">本质</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基础使用"><span class="nav-number">3.1.2.</span> <span class="nav-text">基础使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SharedArrayBuffer-Atomics"><span class="nav-number">3.2.</span> <span class="nav-text">SharedArrayBuffer-Atomics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Object-values-entries"><span class="nav-number">3.3.</span> <span class="nav-text">Object.values/entries</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String-padStart-padEnd"><span class="nav-number">3.4.</span> <span class="nav-text">String.padStart/padEnd</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、ES9"><span class="nav-number">4.</span> <span class="nav-text">四、ES9</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#异步迭代"><span class="nav-number">4.1.</span> <span class="nav-text">异步迭代</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Promise-finally"><span class="nav-number">4.2.</span> <span class="nav-text">Promise.finally</span></a></li></ol></li></ol></div></div></div><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">© <span itemprop="copyrightYear" title="current year">2019</span> <span class="with-love" id="animate"><i class="fa fa-snowflake-o"></i> </span><span class="author" itemprop="copyrightHolder" title="author">chuangge</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">225k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span class="post-meta-item-text">站点阅读时长 ≈</span> <span title="站点阅读时长">3:25</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item-icon" title="本站访客数"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量">本站访客数: <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon" title="本站总访问量"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量">本站总访问量: <span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/jquery/index.js?v=2.1.3"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/lib/reading_progress/reading_progress.js"></script><script src="/js/src/utils.js?v=6.7.0"></script><script src="/js/src/motion.js?v=6.7.0"></script><script src="/js/src/schemes/muse.js?v=6.7.0"></script><script src="/js/src/scrollspy.js?v=6.7.0"></script><script src="/js/src/post-details.js?v=6.7.0"></script><script src="/js/src/bootstrap.js?v=6.7.0"></script><script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>var GUEST=["nick","mail","link"],guest="nick,mail,link";guest=guest.split(",").filter(function(e){return GUEST.indexOf(e)>-1}),new Valine({el:"#comments",verify:!1,notify:!1,appId:"snOvapuSplYTVflf5p9Ml9JX-gzGzoHsz",appKey:"5ABGdfyEdAtu6lTXdGdo7hf9",placeholder:"ヾﾉ≧∀≦)o 来呀！吐槽一番吧！",avatar:"mm",meta:guest,pageSize:"10",visitor:!1})</script><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={},pbOptions.iconStyle="box",pbOptions.boxForm="horizontal",pbOptions.position="bottomCenter",pbOptions.networks="Weibo,Wechat,Douban,QQZone,Twitter,Facebook",new needShareButton("#needsharebutton-postbottom",pbOptions)</script><script type="text/javascript" src="/js/src/clipboard.min.js"></script><script type="text/javascript" src="/js/src/clipboard.js"></script><script type="text/javascript" src="/js/src/clicklove.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",model:{jsonPath:"/live2dw/assets/tororo.model.json"},display:{position:"left",width:120,height:240},mobile:{show:!1},react:{opacityDefault:1,opacityOnHover:1},log:!1,tagMode:!1})</script><script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html><!-- rebuild by neat -->