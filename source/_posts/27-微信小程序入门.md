---
title: 微信小程序入门
tags:
  - 微信小程序
categories: 微信小程序
top: false
keywords:
  - 微信小程序
date: 2019-07-07 00:22:18
description: 基础入门、项目开发
---

# 一、基础入门
  <div style="text-indent: 2em;">小程序的思想是：小程序开发框架的目标是通过尽可能简单、高效的方式让开发者可以在微信中开发具有原生 APP 体验的服务。框架提供了自己的视图层描述语言 WXML 和 WXSS，以及基于 JavaScript 的逻辑层框架，并在视图层与逻辑层间提供了数据传输和事件系统，可以让开发者可以方便的聚焦于数据与逻辑上。</div>


## 主要特点

  * 使用轻便。它不需要安装而是通过扫描二维码等打开后直接执行，用完后也不需要卸载
  * 微信不会提供类似小程序商店的地方，需要小程序提供者自己通过二维码，群分享的手段来传播，这就是去中心化的形态
  * 微信朋友圈提供了好友之间沟通信息的手段，订阅号提供了面向粉丝推送信息的手段，而小程序则是提供了用户通过自己的操作而与服务实现互动的手段。
  * 小程序就是将微信官方提供的 20+ 个基础组件（目前有26个）进行排列组合，然后加上一些css样式，对用户的操作进行反馈（调微信官方提供的60+个api）


## 相关技术

  * 通过 JSON 表现应用的配置信息
  * 通过 CSS + XML 实现视图层的描述
  * 通过 JavaScript 语言实现逻辑层结构
  * 架构在视图层和逻辑层之间提供数据和事件传输功能
  


## 开发准备

  1. 注册账号：微信公众平台 --- 小程序
  3. 安装工具：官网下载微信 web 开发者工具
  3. 创建项目：初始化项目后在开发者工具中打开


## 项目目录
> 注意：app.json 不能添加任何注释，小程序标签不支持 HTML、CSS

  ```js
  testapp
    ├─ pages  // 页面目录：可以删除或自定义配置，新建文件需要在 app.json 中声明
          ├─ index            // 首页
              ├─ index.js
              ├─ index.json          
              ├─ index.wxml
              └─ index.wxss
          └─ logs            // 日志页面

    ├─ utils                // 用于定义一些公共的工具函数，目前只包含 util.js
          └─ util.js

    ├─ app.js    // 入口文件，包括声明全局变量、监听处理生命周期函数、全局登录操作等 
    ├─ app.json  // 全局配置文件，包括页面路径、窗口表现、标签导航、网络超时、debug模式
    ├─ app.wxss  // 全局样式代码，用于全局定义小程序页面和标签的样式，类似 CSS 
    └─ project.config.json     // 目录结构配置文件，类似 package.json
  ```


## 代码差异

  * 标签：小程序里完全取消了 div、span 等标签而全部使用视图容器、基础内容等组件
  * 样式
    * 小程序引入了新单位 rpx，可以根据屏幕宽度进行自适应
    * 不支持 less、sass 等写法 
    * 不支持 p:last-child 等级联选择器 
    * 支持 ::before、::after
  * 交互：采用 js 语法，但是不能获取和操作 dom
    * 绑定：`bind、catch`，区别是 bind 不阻止冒泡而 catch 阻止
    * 事件：`touchstart、touchmove、touchend、touchcancel、longtap、tap`
      * 事件对象：event 包含 currentTarget、target 等事件触发的相关信息
      * 传参方式：`data-hi、dataset`，类似 html 的自定义属性 data-xxx
    * 样式
      * 不能直接获取 dom 控制样式
      * 只能通过 data 里的属性控制样式的变化
    * 请求
      * 小程序里称为 `wx.request`，用法类似于 ajax
      * 注意请求必须是 https 请求，并且需要到小程序的后台里设置合法域名
  

  ```js
  &lt;view id="tap1" data-hi="绑定组件" bindtap="tapName"&gt;
      &lt;view id="tap2" data-hi="触发组件源"&gt;&lt;/view&gt;
  &lt;/view&gt;

  {
    "target": {
      "id": "tap2",
      "dataset":  {
        "hi":"触发组件源"
      }
    },
    "currentTarget":  {
      "id": "tap1",
      "dataset": {
        "hi":"绑定组件"
      }
    }
  }
  ```



























